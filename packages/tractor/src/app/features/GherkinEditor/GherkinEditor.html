<section class="file-tree">
    <h3>Gherkin files:</h3>
    <ul class='file-tree__file-list file-tree__file-list--gherkin'>
        <li ng-repeat="gherkinFileName in gherkinEditor.gherkinFileNames"
            ng-click="gherkinEditor.openGherkinFile(gherkinFileName)"
            ng-class="{ true: 'active' }[gherkinFileName === gherkinEditor.gherkinName + '.feature']"
            class="file-tree__file-list-file">
            <span>{{ gherkinFileName }}</span>
        </li>
    </ul>
</section>

<section class="file-options">
    <h2 class="file-options__name">{{ gherkinEditor.gherkinName }}</h2>
    <div>
        <tractor-text-input class="file-options__name-input" label="Name" model="gherkinEditor.gherkin"></tractor-text-input>
        <tractor-action class="file-options__save-file" model="gherkinEditor" action="Save gherkin"></tractor-action>
    </div>
</section>

<section class="file-editor">
    <section ng-show="gherkinEditor.gherkin.name">
        <section class="file-editor__container">
            <h3>Feature:</h3>

            <tractor-text-input label="In order to" model="gherkinEditor.gherkin"></tractor-text-input>
            <tractor-text-input label="As a" model="gherkinEditor.gherkin"></tractor-text-input>
            <tractor-text-input label="I want" model="gherkinEditor.gherkin"></tractor-text-input>
        </section>

        <section class="file-editor__container">
            <h3>Scenarios:</h3>

            <ul ng-if="gherkinEditor.gherkin.scenarios.length">
                <li class="file-editor__list-item" ng-repeat="scenario in gherkinEditor.gherkin.scenarios">
                    <tractor-action model="gherkinEditor.gherkin" action="Remove scenario" argument="scenario" icon="remove"></tractor-action>

                    <tractor-text-input label="Name" model="scenario"></tractor-text-input>

                    <section>
                        <h4>Step Declarations:</h4>

                        <ol ng-if="scenario.stepDeclarations.length" as-sortable ng-model="scenario.stepDeclarations" is-disabled="scenario.stepDeclarations.length < 2">
                            <li class="file-editor__list-item" ng-repeat="stepDeclaration in scenario.stepDeclarations" as-sortable-item>
                                <tractor-action model="scenario" action="Remove step declaration" argument="stepDeclaration" icon="remove"></tractor-action>
                                <div ng-if="scenario.stepDeclarations.length > 1" class="file-editor__sort-handle" as-sortable-item-handle title="Drag to sort"></div>

                                <tractor-select label="Type" model="stepDeclaration"></tractor-select>
                                <tractor-step-input label="Step" model="stepDeclaration"></tractor-step-input>
                            </li>
                        </ol>

                        <tractor-action model="scenario" action="Add step declaration"></tractor-action>
                    </section>

                    <section ng-show="scenario.exampleVariables.length">
                        <h4>Examples:</h4>

                        <ul>
                            <li class="file-editor__list-item" ng-repeat="example in scenario.examples">
                                <tractor-action model="scenario" action="Remove example" argument="example" icon="remove"></tractor-action>

                                <tractor-literal-input ng-repeat="exampleVariable in scenario.exampleVariables" name="exampleVariable" model="example.values[exampleVariable]"></tractor-literal-input>
                            </li>
                        </ul>

                        <tractor-action model="scenario" action="Add example"></tractor-action>
                    </section>
                </li>
            </ul>

            <tractor-action model="gherkinEditor.gherkin" action="Add scenario"></tractor-action>
        </section>
    </section>
</section>
